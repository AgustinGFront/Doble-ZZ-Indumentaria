const productos=[{
    id:1,
    nombre:"Boca juniors Conjunto",
    categoria: "Primera Division",
    precio:14000,
    talles:"M,L,XL,XXL"
    
},
{
    id:2,
    nombre:"Boca Juniors Mangalarga",
    categoria: "Primera Division",
    estilo:"Mangalarga",
    precio:14000,
    talles:"M,L,XL,XXL"
    
},
{
    id:3,
    nombre:"Boca Juniors Conjunto Quilmes",
    categoria: "Primera Division",
    precio:14000,
    talles:"M,L,XL,XXL"
    
},
{
    id:4,
    nombre:"Boca Juniors Mangalarga azul",
    categoria: "Primera Division",
    estilo:"Mangalarga",
    precio:14000,
    talles:"M,L,XL,XXL"
    
},
{
    id:5,
    nombre:"River Mangalarga",
    categoria: "Primera Division",
    estilo:"Mangalarga",
    precio:14000,
    talles:"M,L,XL,XXL"
    
},
{
    id:6,
    nombre:"River Plate Conjunto Alternativo",
    categoria: "Primera Division",
    precio:14000,
    talles:"M,L,XL,XXL"
    
},
{
    id:7,
    nombre:"River Plate Mangalarga blanca",
    categoria: "Primera Division",
    estilo:"Mangalarga",
    precio:14000,
    talles:"M,L,XL,XXL"
    
},
{
    id:8,
    nombre:"River Plate Conjunto Quilmes",
    categoria: "Primera Division",
    precio:14000,
    talles:"M,L,XL,XXL"
    
},
{
    id:9,
    nombre:"Independiente Conjunto",
    categoria: "Primera Division",
    precio:14000,
    talles:"M,L,XL,XXL"
    
},
{
    id:10,
    nombre:"Central Conjunto",
    categoria: "Primera Division",
    precio:14000,
    talles:"M,L,XL,XXL"
    
},
{
    id:11,
    nombre:"Central Alternativo Conjunto",
    categoria: "Primera Division",
    precio:14000,
    talles:"M,L,XL,XXL"
    
},
{
    id:12,
    nombre:"Central Cordoba Conjunto",
    categoria: "Primera Division",
    precio:14000,
    talles:"M,L,XL,XXL"
    
},
{
    id:13,
    nombre:"Central Cordoba Mangalarga",
    categoria: "Primera Division",
    estilo:"Mangalarga",
    precio:14000,
    talles:"M,L,XL,XXL"
    
},
{
    id:14,
    nombre:"Defensa y Justicia Conjunto",
    categoria: "Primera Division",
    precio:14000,
    talles:"M,L,XL,XXL"
    
},
{
    id:15,
    nombre:"Talleres Conjunto",
    categoria: "Primera Division",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:16,
    nombre:"Banfield Conjunto",
    categoria: "Primera Division",
    precio:14000,
    talles:"M,L,XL,XXL"
    
},
{
    id:17,
    nombre:"Gimnasia Mangalarga",
    categoria: "Primera Division",
    estilo:"Mangalarga",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,

{
    id:18,
    nombre:"Quilmes Conjunto",
    categoria: "Ascenso",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:19,
    nombre:"Sacachispas Conjunto",
    categoria: "Ascenso",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:20,
    nombre:"Laferrere Conjunto",
    categoria: "Ascenso",
    precio:14000,
    talles:"M,L,XL,XXL"
    
},
{
    id:21,
    nombre:"Laferrere Conjunto Heineiken",
    categoria: "Ascenso",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:22,
    nombre:"Central Norte Conjunto",
    categoria: "Ascenso",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:23,
    nombre:"Claypole Conjunto",
    categoria: "Ascenso",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:24,
    nombre:"Chaco For Ever Mangalarga",
    categoria: "Ascenso",
    estilo:"Mangalarga",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:25,
    nombre:"Chacarita Mangalarga",
    categoria: "Ascenso",
    estilo:"Mangalarga",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:26,
    nombre:"Quilmes Mangalarga",
    categoria: "Ascenso",
    estilo:"Mangalarga",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:27,
    nombre:"Alemania Conjunto Heineiken",
    categoria: "Selecciones",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:28,
    nombre:"Alemania Conjunto",
    categoria: "Selecciones",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:29,
    nombre:"Argentina Mangalarga",
    categoria: "Selecciones",
    estilo:"Mangalarga",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:30,
    nombre:"Argentina negro Conjunto",
    categoria: "Selecciones",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:31,
    nombre:"Argentina Conjunto Blanco",
    categoria: "Selecciones",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:32,
    nombre:"Fluminense Conjunto",
    categoria: "Sudamerica",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:33,
    nombre:"Palmeiras Conjunto Musculosa",
    categoria: "Sudamerica",
    estilo:"Musculosa",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:34,
    nombre:"Flamengo Conjunto Musculosa",
    categoria: "Sudamerica",
    estilo:"Musculosa",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:35,
    nombre:"Fluminense Conjunto Musculosa",
    categoria: "Sudamerica",
    estilo:"Musculosa",
    precio:14000,
    talles:"M,L,XL,XXL"
    
},
{
    id:36,
    nombre:"Real Madrid Conjunto Mangalarga",
    categoria: "Europa",
    estilo:"Mangalarga",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:37,
    nombre:"Real Madrid Conjunto Alternativo",
    categoria: "Europa",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:38,
    nombre:"Barcelona Conjunto Mangalarga",
    categoria: "Europa",
    estilo:"Mangalarga",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:39,
    nombre:"Barcelona Conjunto Alternativo",
    categoria: "Europa",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:40,
    nombre:"Atletico Madrid Conjunto Mangalarga",
    categoria: "Europa",
    estilo:"Mangalarga",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:41,
    nombre:"Inter De Milan Conjunto Mangalarga",
    categoria: "Europa",
    estilo:"Mangalarga",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:42,
    nombre:"Milan Conjunto",
    categoria: "Europa",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:43,
    nombre:"Milan Conjunto Alternativo",
    categoria: "Europa",
    precio:14000,
    talles:"M,L,XL,XXL"
    
},
{
    id:44,
    nombre:"Milan Conjunto Alternativo Negro",
    categoria: "Europa",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:45,
    nombre:"Napoli Conjunto",
    categoria: "Europa",
    precio:14000,
    talles:"M,L,XL,XXL"
    
},
{
    id:46,
    nombre:"Liverpool Conjunto",
    categoria: "Europa",
    precio:14000,
    talles:"M,L,XL,XXL"
    
},
{
    id:47,
    nombre:"Los Pibes De Fiorito Conjunto",
    categoria: "Influencers",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:48,
    nombre:"Los Pibes De Fiorito Conjunto Musculosa",
    categoria: "Influencers",
    estilo:"Musculosa",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:49,
    nombre:"Los Pibes De Fiorito Mangalarga",
    categoria: "Influencers",
    estilo:"Mangalarga",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:50,
    nombre:"Team Balanza Conjunto",
    categoria: "Influencers",
    precio:14000,
    talles:"M,L,XL,XXL"
    
},
{
    id:51,
    nombre:"Team Balanza Conjunto Musculosa",
    categoria: "Influencers",
    estilo:"Musculosa",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:52,
    nombre:"Team Nene Conjunto",
    categoria: "Influencers",
    precio:14000,
    talles:"M,L,XL,XXL"
    
},
{
    id:53,
    nombre:"Team Nene Mangalarga",
    categoria: "Influencers",
    estilo:"Mangalarga",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:54,
    nombre:"MDS Conjunto Musculosa",
    categoria: "Influencers",
    estilo:"Musculosa",
    precio:14000,
    talles:"M,L,XL,XXL"
    
}
,
{
    id:55,
    nombre:"MDS Mangalarga",
    categoria: "Influencers",
    estilo:"Mangalarga",
    precio:14000,
    talles:"M,L,XL,XXL"
    
},
{
    id:56,
    nombre:"Francia Conjunto",
    categoria: "Selecciones",
    precio:14000,
    talles:"M,L,XL,XXL"
},
{
    id:57,
    nombre:"Brasil Mangalarga",
    categoria: "Selecciones",
    estilo:"Mangalarga",
    precio:14000,
    talles:"M,L,XL,XXL"
}
]
// querySelector() = busca UN elemento en el HTML
// querySelectorAll() = busca TODOS los elementos que coincidan
// addEventListener() = "escucha" cuando pasa algo (click, escribir, etc.)
// forEach() = recorre un array o lista uno por uno
// includes() = verifica si un texto contiene otro texto
// style.display = mostrar u ocultar elementos
    // Ejecutar la función
    // registroYVerificacion();
    // // CARRRITO PROXIMAMENTE
    let carrito=[]
    let total=0
    

const lupa_boton = document.querySelector(".btn-lupa");
const buscador_input = document.querySelector(".Buscador");

// Guarda TODOS los productos
const todosLosProductos = document.querySelectorAll(".bg-white.border.rounded-lg");

//  lupa móvil
lupa_boton.addEventListener("click", () => {
    buscador_input.classList.toggle("hidden");
    buscador_input.classList.toggle("sm:block");
    buscador_input.focus();
});

// Escuchar  el usuario 
buscador_input.addEventListener("input", (e) => {
    const textoBusqueda = e.target.value.toLowerCase().trim();
    buscarProductos(textoBusqueda);
});

//Función de búsqueda 
function buscarProductos(texto) {
    let productosEncontrados = 0;
    
    // Remover mensaje previo si existe
    const mensajePrevio = document.querySelector("#mensaje-no-encontrado");
    if (mensajePrevio) {
        mensajePrevio.remove();
    }

    // Si no hay texto, mostrar todos
    if (texto === "") {
        todosLosProductos.forEach(producto => {
            producto.style.display = "";
        });
        return;
    }

    // Recorrer cada producto
    todosLosProductos.forEach(producto => {
        const nombreProducto = producto.querySelector("h3").textContent.toLowerCase();
        
        if (nombreProducto.includes(texto)) {
            producto.style.display = "";
            productosEncontrados++;
        } else {
            producto.style.display = "none";
        }
    });

    // Si no se encontraron productos, mostrar mensaje
    if (productosEncontrados === 0) {
        mostrarMensajeNoEncontrado(texto);
    }
}

// Mostrar mensaje de "no encontrado"
function mostrarMensajeNoEncontrado(textoBusqueda) {
    // Buscar el primer contenedor grid de productos
    const contenedorGrid = document.querySelector(".grid.grid-cols-1");
    
    // Crear el mensaje
    const mensaje = document.createElement("div");
    mensaje.id = "mensaje-no-encontrado";
    mensaje.className = "col-span-full text-center py-12 px-4";
    mensaje.innerHTML = `
        <div class="max-w-md mx-auto">
            <svg class="mx-auto h-16 w-16 text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
            </svg>
            <h3 class="text-2xl font-bold text-gray-700 mb-2">No se encontraron productos</h3>
            <p class="text-gray-500 mb-4">No hay productos que coincidan con "<span class="font-semibold">${textoBusqueda}</span>"</p>
            <button onclick="limpiarBusqueda()" class="px-6 py-2 bg-blue-800/50 text-white rounded-lg hover:bg-blue-700 transition">
                Ver todos los productos
            </button>
        </div>
    `;
    
    // Insertar el mensaje al inicio del grid
    contenedorGrid.insertBefore(mensaje, contenedorGrid.firstChild);
}

//Función para limpiar
function limpiarBusqueda() {
    buscador_input.value = "";
    buscarProductos("");
}


// SECCION CONTACTO CON EMAILJS

// 1. Inicialización de EmailJS con el User ID (Public Key)
// User ID: 0BurCND5jdUezS9ZJ
emailjs.init("0BurCND5jdUezS9ZJ"); 

// 2. Definición de variables del formulario
const form = document.getElementById('form-contacto');
const btn = form.querySelector('button[type="submit"]');

// 3. IDs del servicio y la plantilla
const SERVICE_ID = 'service_ljafooc'; 
const TEMPLATE_ID = 'template_padj6wu'; 


// 4. Listener para el envío del formulario
form.addEventListener('submit', function(event) {
    // Evita el envío por defecto de HTML
    event.preventDefault(); 

    // Bloquea el botón y cambia el texto
    const originalText = btn.innerText;
    btn.innerText = 'Enviando...';
    btn.disabled = true; 
    
    // Función de envío de EmailJS
    emailjs.sendForm(SERVICE_ID, TEMPLATE_ID, this) // 'this' es el formulario HTML
        .then(() => {
            // Éxito: Muestra alerta y limpia el formulario
            alert('✅ ¡Mensaje enviado con éxito! Nos pondremos en contacto pronto.');
            form.reset(); 
        }, (error) => {
            // Error: Muestra alerta y registra el error
            console.error('EmailJS Error:', error);
            alert('❌ Ocurrió un error al enviar el mensaje. Intenta de nuevo. Revisa la consola (F12) para detalles.');
        })
        .finally(() => {
            // Finaliza: Restaura el botón
            btn.innerText = originalText; 
            btn.disabled = false; 
        });
});